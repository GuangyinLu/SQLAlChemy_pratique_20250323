{% extends 'base.html' %}

{% block title %}DashBoard{% endblock %}

{% block content %}
<!--
<h2>Bienvenu，{{ current_user.username }}！</h2>
<p>Role：{{ current_user.role }}</p> -->

<h1>Hai!  Des travaux à faire!</h1>

<!--
{% if current_user.role == "admin" %}
    <a href="{{ url_for('customer.get_customers') }}">Gestion de Clients</a>
    <a href="{{ url_for('policy.get_policies') }}">Gestion de Policies</a>
{% elif current_user.role == "agent" %}
    <a href="{{ url_for('customer.get_customers') }}">View clients</a>
    <a href="{{ url_for('policy.get_policies') }}">View Policies</a>
{% endif %}
-->

<div class="container mt-4">
    <h2>Gestion des Policies</h2>
    
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Policy_ID</th>
                <th>Policy_Number</th>
                <th>Insurance_Product</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Customer Name(last)</th>
                <th>Customer Name(first)</th>
                <th>Customer Phone</th>
                <th>Customer Email</th>
                <th>Customer Address</th>
                <th>Agent Name(last)</th>
                <th>Agent Name(first)</th>
                <th>Agent Phone</th>
            </tr>
        </thead>
        <tbody id="customer-table">
            {% for policy, customer, insurance_product, agentCustomersRelation, agent in results %}
            <tr>
                <td>{{ policy.policy_id }}</td>
                <td>{{ policy.policy_number }}</td>
                <td>{{ insurance_product.product_name }}</td>
                <td>{{ policy.start_date }}</td>
                <td>{{ policy.end_date }}</td>
                <td>{{ customer.name_last }}</td>
                <td>{{ customer.name_first }}</td>
                <td>{{ customer.phone }}</td>
                <td>{{ customer.email }}</td>
                <td>{{ customer.address }}</td>
                <td>{{ agent.name_last }}</td>
                <td>{{ agent.name_first }}</td>
                <td>{{ agent.phone }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- 分页 -->
    <nav>
        <ul class="pagination">
            {% if page > 1 %}
            <li class="page-item"><a class="page-link" href="?page={{ page - 1 }}">上一页</a></li>
            {% endif %}
            {% for i in range(1, total_pages + 1) %}
            <li class="page-item {% if page == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}">{{ i }}</a>
            </li>
            {% endfor %}
            {% if page < total_pages %}
            <li class="page-item"><a class="page-link" href="?page={{ page + 1 }}">下一页</a></li>
            {% endif %}
        </ul>
    </nav>
</div>

{% endblock %}
<!--
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
-->
{% block scripts %}


{% endblock %}